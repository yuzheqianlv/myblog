{% extends "base.html" %}

{% block content %}
<div class="page-content home-content">
    <!-- 内容容器 -->
    <div class="content-container">
        <!-- 内容区域 -->
        <div class="content-area">
                <!-- 标题行 -->
                <div class="board-line title-line">
                    <span class="line-text" data-text="千虑者的技术博客">千虑者的技术博客</span>
                    <span class="cursor">|</span>
                </div>
                
                <!-- 分隔线 -->
                <div class="board-line separator-line">
                    <span class="line-text" data-text="════════════════════════════════">════════════════════════════════</span>
                </div>
                
                <!-- 欢迎信息 -->
                <div class="board-line intro-line">
                    <span class="line-text" data-text="欢迎来到我的技术学习园地！">欢迎来到我的技术学习园地！</span>
                </div>
                
                <div class="board-line empty-line"></div>
                
                <!-- 博客介绍 -->
                <div class="board-line">
                    <span class="line-text" data-text="这里记录着我在技术路上的思考与实践">这里记录着我在技术路上的思考与实践</span>
                </div>
                
                <div class="board-line empty-line"></div>
                
                <!-- 技术领域 -->
                <div class="board-line indent-line">
                    <span class="line-text" data-text="   - Rust 语言深度探索">   - Rust 语言深度探索</span>
                </div>
                
                <div class="board-line indent-line">
                    <span class="line-text" data-text="   - WebAssembly 实践应用">   - WebAssembly 实践应用</span>
                </div>
                
                <div class="board-line indent-line">
                    <span class="line-text" data-text="   - 系统编程与性能优化">   - 系统编程与性能优化</span>
                </div>
                
                <div class="board-line indent-line">
                    <span class="line-text" data-text="   - 软件架构设计模式">   - 软件架构设计模式</span>
                </div>
                
                <div class="board-line empty-line"></div>
                
                <!-- 博客特点 -->
                <div class="board-line">
                    <span class="line-text" data-text="博客特色功能">博客特色功能</span>
                </div>
                
                <div class="board-line empty-line"></div>
                
                <div class="board-line indent-line">
                    <span class="line-text" data-text="   - 基于 Zola 的高性能静态站点">   - 基于 Zola 的高性能静态站点</span>
                </div>
                
                <div class="board-line indent-line">
                    <span class="line-text" data-text="   - Rust 实现的全文搜索功能">   - Rust 实现的全文搜索功能</span>
                </div>
                
                <div class="board-line indent-line">
                    <span class="line-text" data-text="   - 完美适配移动设备体验">   - 完美适配移动设备体验</span>
                </div>
                
                <div class="board-line indent-line">
                    <span class="line-text" data-text="   - 优雅的暗色/亮色主题切换">   - 优雅的暗色/亮色主题切换</span>
                </div>
                
                <div class="board-line empty-line"></div>
                
                <!-- 座右铭 -->
                <div class="board-line quote-line">
                    <span class="line-text" data-text="『智者千虑必有一失，愚者千虑必有一得』">『智者千虑必有一失，愚者千虑必有一得』</span>
                </div>
                
                <div class="board-line empty-line"></div>
                
                <!-- 开始探索 -->
                <div class="board-line center-line">
                    <span class="line-text" data-text="开始您的技术探索之旅吧">开始您的技术探索之旅吧</span>
                </div>
        </div>
    </div>
</div>

<style>
/* 基础样式 */
.page-content {
    max-width: 900px;
    margin: 0 auto;
    padding: 2rem;
    min-height: 70vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* 内容容器 */
.content-container {
    width: 100%;
    margin: 0 auto;
    animation: slideIn 1s ease-out;
}

/* 内容区域 */
.content-area {
    position: relative;
    padding: 2rem 0;
    min-height: 500px;
    transition: all 0.3s ease;
}

/* 文字区域样式 */
.content-area {
    font-family: 'Courier New', 'Monaco', monospace;
    font-size: 1.1rem;
    line-height: 2;
    color: var(--text-color);
    position: relative;
}

/* 内容行样式 */
.board-line {
    margin: 0.5rem 0;
    min-height: 2rem;
    display: flex;
    align-items: center;
    position: relative;
    opacity: 0;
    transform: translateX(-20px);
    animation: lineAppear 0.6s ease-out forwards;
}

/* 标题行特殊样式 */
.title-line {
    font-size: 1.8rem;
    font-weight: bold;
    color: var(--title-color);
    justify-content: center;
    margin-bottom: 1rem;
    animation-delay: 0.5s;
}

/* 分隔线样式 */
.separator-line {
    justify-content: center;
    color: var(--border-color);
    font-weight: bold;
    animation-delay: 1s;
}

/* 介绍行样式 */
.intro-line {
    font-size: 1.3rem;
    color: var(--primary-color);
    justify-content: center;
    animation-delay: 1.5s;
}

/* 缩进行样式 */
.indent-line {
    padding-left: 2rem;
    animation-delay: calc(2s + var(--line-index) * 0.3s);
}

/* 引用行样式 */
.quote-line {
    font-style: italic;
    color: var(--secondary-color);
    justify-content: center;
    font-size: 1.1rem;
    animation-delay: 6s;
}

/* 居中行样式 */
.center-line {
    justify-content: center;
    font-size: 1.2rem;
    font-weight: bold;
    color: var(--primary-color);
    animation-delay: 6.5s;
}

/* 空行样式 */
.empty-line {
    height: 1rem;
    animation-delay: calc(1.8s + var(--line-index) * 0.2s);
}

/* 文字容器 */
.line-text {
    position: relative;
    display: inline-block;
    opacity: 0;
}

/* 光标样式 */
.cursor {
    display: inline-block;
    background: var(--primary-color);
    width: 2px;
    height: 1.2em;
    margin-left: 2px;
    animation: blink 1s infinite;
    opacity: 0;
}

/* 显示光标 */
.cursor.show {
    opacity: 1;
}

/* 光标闪烁动画 */
@keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
}

/* 行出现动画 */
@keyframes lineAppear {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* 整体滑入动画 */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* 文字打字机效果 */
@keyframes typewriter {
    from {
        width: 0;
    }
    to {
        width: 100%;
    }
}

/* 内容区悬停效果 */
.content-area:hover {
    transform: translateY(-1px);
}

/* 响应式调整 */
@media (max-width: 768px) {
    .page-content {
        padding: 1rem;
    }
    
    .content-area {
        padding: 1.5rem 0;
        min-height: 400px;
    }
    
    .content-area {
        font-size: 1rem;
        line-height: 1.8;
    }
    
    .title-line {
        font-size: 1.4rem;
    }
    
    .intro-line {
        font-size: 1.1rem;
    }
    
    .indent-line {
        padding-left: 1rem;
    }
}

@media (max-width: 480px) {
    .content-area {
        padding: 1rem 0;
        min-height: 350px;
    }
    
    .content-area {
        font-size: 0.9rem;
        line-height: 1.6;
    }
    
    .title-line {
        font-size: 1.2rem;
    }
    
    .intro-line {
        font-size: 1rem;
    }
}

/* 为不同行设置延迟变量 */
.board-line:nth-child(1) { --line-index: 0; }
.board-line:nth-child(2) { --line-index: 1; }
.board-line:nth-child(3) { --line-index: 2; }
.board-line:nth-child(4) { --line-index: 3; }
.board-line:nth-child(5) { --line-index: 4; }
.board-line:nth-child(6) { --line-index: 5; }
.board-line:nth-child(7) { --line-index: 6; }
.board-line:nth-child(8) { --line-index: 7; }
.board-line:nth-child(9) { --line-index: 8; }
.board-line:nth-child(10) { --line-index: 9; }
.board-line:nth-child(11) { --line-index: 10; }
.board-line:nth-child(12) { --line-index: 11; }
.board-line:nth-child(13) { --line-index: 12; }
.board-line:nth-child(14) { --line-index: 13; }
.board-line:nth-child(15) { --line-index: 14; }
.board-line:nth-child(16) { --line-index: 15; }
.board-line:nth-child(17) { --line-index: 16; }
.board-line:nth-child(18) { --line-index: 17; }
.board-line:nth-child(19) { --line-index: 18; }
.board-line:nth-child(20) { --line-index: 19; }
</style>

<script>
// 打字机效果实现
class BlackboardTypewriter {
    constructor() {
        this.currentLineIndex = 0;
        this.lines = [];
        this.typingSpeed = 50; // 每个字符的打字间隔
        this.lineDelay = 800; // 行间延迟
        this.init();
    }

    init() {
        // 获取所有包含文字的行
        this.lines = Array.from(document.querySelectorAll('.line-text'));
        
        // 初始化所有文字为空
        this.lines.forEach(line => {
            line.textContent = '';
            line.style.opacity = '0';
        });
        
        // 开始打字动画
        setTimeout(() => this.startTyping(), 1000);
    }

    async startTyping() {
        for (let i = 0; i < this.lines.length; i++) {
            await this.typeLine(this.lines[i]);
            await this.wait(this.lineDelay);
        }
        
        // 所有文字打字完成后，显示最后的光标
        this.showFinalCursor();
    }

    async typeLine(lineElement) {
        const fullText = lineElement.getAttribute('data-text') || lineElement.textContent;
        if (!fullText) return;
        
        lineElement.style.opacity = '1';
        lineElement.textContent = '';
        
        // 在当前行显示光标
        const cursor = this.createCursor();
        lineElement.appendChild(cursor);
        
        // 逐字符打字
        for (let i = 0; i < fullText.length; i++) {
            lineElement.textContent = fullText.substring(0, i + 1);
            lineElement.appendChild(cursor);
            await this.wait(this.typingSpeed);
        }
        
        // 移除当前行的光标
        cursor.remove();
    }

    createCursor() {
        const cursor = document.createElement('span');
        cursor.className = 'cursor show';
        cursor.textContent = '|';
        return cursor;
    }

    showFinalCursor() {
        // 在最后一行显示永久光标
        const lastLine = this.lines[this.lines.length - 1];
        if (lastLine) {
            const finalCursor = this.createCursor();
            lastLine.appendChild(finalCursor);
        }
    }

    wait(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
}

// 页面加载完成后启动打字机效果
document.addEventListener('DOMContentLoaded', () => {
    // 等待黑板滑入动画完成后开始打字
    setTimeout(() => {
        new BlackboardTypewriter();
    }, 500);
    
    // 添加键盘交互
    document.addEventListener('keydown', (e) => {
        // 按空格键重新播放动画
        if (e.code === 'Space') {
            e.preventDefault();
            location.reload();
        }
    });
    
    // 添加点击重新播放功能
    const contentArea = document.querySelector('.content-area');
    if (contentArea) {
        contentArea.addEventListener('click', () => {
            // 双击重新播放
            clearTimeout(contentArea.clickTimeout);
            contentArea.clickTimeout = setTimeout(() => {
                // 单击不做任何操作
            }, 300);
        });
        
        contentArea.addEventListener('dblclick', () => {
            clearTimeout(contentArea.clickTimeout);
            location.reload();
        });
    }
    
    // 添加触摸支持
    let touchCount = 0;
    contentArea?.addEventListener('touchend', () => {
        touchCount++;
        setTimeout(() => {
            if (touchCount === 2) {
                location.reload();
            }
            touchCount = 0;
        }, 300);
    });
});

// 添加一些视觉反馈效果
document.addEventListener('DOMContentLoaded', () => {
    // 为内容区添加一些互动效果
    const lines = document.querySelectorAll('.board-line');
    
    lines.forEach((line, index) => {
        line.addEventListener('mouseenter', () => {
            line.style.transform = 'translateX(5px)';
            line.style.transition = 'transform 0.2s ease';
        });
        
        line.addEventListener('mouseleave', () => {
            line.style.transform = 'translateX(0)';
        });
    });
    
    // 添加轻微的滑动视差效果
    window.addEventListener('scroll', () => {
        const scrolled = window.pageYOffset;
        const contentArea = document.querySelector('.content-area');
        if (contentArea) {
            contentArea.style.transform = `translateY(${scrolled * 0.05}px)`;
        }
    });
});
</script>
{% endblock content %} 